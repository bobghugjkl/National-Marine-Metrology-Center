# 菜单整合说明

## 📋 需求说明

将左侧菜单中的"航前质量监督检查记录表"功能整合到"航前检查"菜单下，删除重复菜单项。

## 🔄 修改内容

### 修改前的菜单结构

```
📁 任务管理
  ├─ 新建任务
  ├─ 航前质量监督检查记录表  ❌ (删除)
  └─ 任务管理

📁 航前检查
  ├─ 航前质量监督检查记录  ✅ (原本指向 /system-user，现在改为 /system-role)
  └─ 外业调查人员资质
```

### 修改后的菜单结构

```
📁 任务管理
  ├─ 新建任务
  └─ 任务管理

📁 航前检查
  ├─ 航前质量监督检查记录  ✅ (指向任务列表页面，功能完整)
  └─ 外业调查人员资质
```

## ✅ 具体修改

### 1. 删除"任务管理"下的重复菜单项

**文件**: `src/components/menu.ts`

**删除的代码** (第22-27行):
```typescript
{
    id: '02',
    pid: '0',
    index: '/system-role',
    title: '航前质量监督检查记录表',  // ❌ 删除此项
},
```

### 2. 修改"航前检查"下的菜单项路由

**文件**: `src/components/menu.ts`

**修改前**:
```typescript
{
    id: '11',
    pid: '1',
    index: '/system-user',  // ❌ 指向错误
    title: '航前质量监督检查记录',
},
```

**修改后**:
```typescript
{
    id: '11',
    pid: '1',
    index: '/system-role',  // ✅ 指向任务列表页面
    title: '航前质量监督检查记录',
},
```

## 🎯 功能说明

### 路由映射关系

| 菜单路径 | 路由地址 | 对应页面 | 功能 |
|---------|---------|---------|------|
| 航前检查 → 航前质量监督检查记录 | `/system-role` | `inspection-task-list.vue` | 显示所有任务列表 |
| (点击任务行) | `/inspection-record/:task_name` | `inspection-record.vue` | 编辑检查记录 |

### 完整功能流程

1. **进入检查记录模块**
   - 点击左侧菜单："航前检查" → "航前质量监督检查记录"
   
2. **查看任务列表**
   - 显示所有任务（从后端 `/api/tasks` 获取）
   - 表格展示：任务名称、专项名称、任务编号等

3. **选择任务**
   - 点击任务行或"查看检查记录"按钮
   - 跳转到检查记录编辑页面

4. **编辑检查记录**
   - 填写11个检查项
   - 填写补充说明和签名信息
   - 保存数据到后端 `/api/inspections/:task_name`

## 📝 验证步骤

修改后，请按以下步骤验证：

1. **刷新浏览器**
   ```bash
   # 如果前端正在运行，刷新浏览器即可
   # 如果没有运行，启动前端
   npm run dev
   ```

2. **检查菜单结构**
   - ✅ "任务管理"下只有2个子菜单（新建任务、任务管理）
   - ✅ "航前检查"下有"航前质量监督检查记录"

3. **测试功能**
   - 点击"航前检查" → "航前质量监督检查记录"
   - 应该显示任务列表页面
   - 点击任务应该跳转到检查记录编辑页面
   - 所有功能与之前的"航前质量监督检查记录表"一致

## 🔗 相关路由配置

虽然菜单项已删除，但路由配置保留不变，以确保功能正常：

**文件**: `src/router/index.ts`

```typescript
// 任务列表页面（航前检查记录入口）
{
    path: '/system-role',
    name: 'system-role',
    meta: {
        title: '航前质量监督检查记录表',
        permiss: '12',
    },
    component: () => import('../views/preVoyageInspection/inspection-task-list.vue'),
},

// 检查记录详情页面
{
    path: '/inspection-record/:task_name',
    name: 'inspection-record',
    meta: {
        title: '检查记录详情',
        permiss: '12',
    },
    component: () => import('../views/preVoyageInspection/inspection-record.vue'),
},
```

## 📊 修改总结

| 项目 | 修改前 | 修改后 |
|------|--------|--------|
| 菜单项数量 | 2个入口（重复） | 1个入口 |
| 位置 | 任务管理 + 航前检查 | 仅航前检查 |
| 功能 | 完全相同 | 保持不变 |
| 路由 | `/system-role` | `/system-role` |
| 页面组件 | `inspection-task-list.vue` | `inspection-task-list.vue` |

## ✨ 优势

1. **菜单结构更清晰**：不再有重复的菜单项
2. **逻辑更合理**：航前检查记录归类到"航前检查"菜单下
3. **功能完整保留**：所有原有功能都正常工作
4. **用户体验优化**：减少混淆，导航更直观

---

**修改完成时间**：2025年9月30日  
**修改文件**：`src/components/menu.ts`  
**验证状态**：✅ 已完成，待用户验证
